(this["webpackJsonpspotify-fun"]=this["webpackJsonpspotify-fun"]||[]).push([[0],{100:function(e,t,n){},127:function(e,t){},133:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(27),s=n.n(a),i=n(16),o=n(21),u=n.n(o),l=n(29),f=n(9),j=(n(89),n(90),n(91),n(92),n(2));function d(e){return Object(j.jsxs)("div",{className:"Track",children:[Object(j.jsxs)("div",{className:"Track-information",children:[Object(j.jsx)("h3",{children:e.track.name}),Object(j.jsxs)("p",{children:[e.track.artists," | ",e.track.album]})]}),Object(j.jsx)("button",{className:"Track-action",onClick:function(t){var n;e.isRemoval?(n={id:e.track.id,name:e.track.name,artists:e.track.artists,album:e.track.album},e.onRemove&&e.onRemove(n)):function(t){e.onAdd&&e.onAdd(t)}({id:e.track.id,name:e.track.name,artists:e.track.artists,album:e.track.album})},children:e.isRemoval?"-":"+"})]},e.track.id)}function p(e){return Object(j.jsx)("div",{className:"TrackList",children:e.trackList.map((function(t){return Object(j.jsx)(d,{track:t,onAdd:function(t){e.onAdd&&e.onAdd(t)},onRemove:function(t){e.onRemove&&e.onRemove(t)},isRemoval:e.isRemoval})}))})}var b=n(72),h=(n(94),n(164)),O=n(163),m=n(169),v=n(167),k=n(168),x=n(162),g=n(165),y=r.forwardRef((function(e,t){return Object(j.jsx)(g.a,Object(b.a)({direction:"up",ref:t},e))}));function A(){var e=r.useState(!1),t=Object(f.a)(e,2),n=t[0],c=t[1],a=function(){c(!1)};return Object(j.jsxs)("div",{children:[Object(j.jsxs)("button",{onClick:function(){c(!0)},className:"AnalysisDialog-save",children:[" ","ANALYSE SONGS"]}),Object(j.jsxs)(O.a,{open:n,TransitionComponent:y,keepMounted:!0,onClose:a,"aria-describedby":"alert-dialog-slide-description",children:[Object(j.jsx)(x.a,{children:"Use Google's location service?"}),Object(j.jsx)(v.a,{children:Object(j.jsx)(k.a,{id:"alert-dialog-slide-description",children:"Let Google help apps determine location. This means sending anonymous location data to Google, even when no apps are running."})}),Object(j.jsxs)(m.a,{children:[Object(j.jsx)(h.a,{onClick:a,children:"Disagree"}),Object(j.jsx)(h.a,{onClick:a,children:"Agree"})]})]})]})}function R(e){return Object(j.jsxs)("div",{className:"Playlist",children:[Object(j.jsx)("h2",{children:"Songs to Analyse"}),Object(j.jsx)(p,{trackList:e.playlistTracks,onRemove:function(t){return e.onRemove(t)},isRemoval:!0}),Object(j.jsx)(A,{})]})}n(99);function S(e){return Object(j.jsxs)("div",{className:"SearchResults",children:[Object(j.jsx)("h2",{children:"Results"}),Object(j.jsx)(p,{isRemoval:!1,trackList:e.searchResults,onAdd:function(t){e.onAdd(t)}})]})}n(100);function w(e){var t=Object(r.useState)(""),n=Object(f.a)(t,2),c=n[0],a=n[1];return Object(j.jsxs)("div",{className:"SearchBar",children:[Object(j.jsx)("input",{placeholder:"Enter A Song, Album, or Artist",onChange:function(e){a(e.target.value)}}),Object(j.jsx)("button",{className:"SearchButton",onClick:function(){e.onSearch(c)},children:"SEARCH"})]})}var T=n(26),C=n(30),N=n(45),E=n.n(N),I=n(75),F=n.n(I),L=function(){function e(){Object(T.a)(this,e)}return Object(C.a)(e,null,[{key:"reset",value:function(){e.accessToken="",e.expiresIn=0}}]),e}();L.accessToken=void 0,L.expiresIn=void 0,L.getAccessToken=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,c,a,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},auth:{username:t,password:n}},c={grant_type:"client_credentials"},e.prev=2,e.next=5,E.a.post("https://accounts.spotify.com/api/token",F.a.stringify(c),r);case 5:a=e.sent,L.accessToken=a.data.access_token,L.expiresIn=a.data.expiresIn,e.next=17;break;case 10:if(e.prev=10,e.t0=e.catch(2),!(s=e.t0.response)){e.next=16;break}return i=s.data,e.abrupt("return",new Error("".concat(i.error,": ").concat(i.error_description)));case 16:return e.abrupt("return",new Error("Request Failed"));case 17:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}();var B=function e(){Object(T.a)(this,e)};B.spotifyClientId="3683a535eef44e2ab15523f2a929b152",B.spotifyClientSecret="e1a35aff514044b786414ce582ef5264";var G=function(){function e(){Object(T.a)(this,e)}return Object(C.a)(e,null,[{key:"getArtists",value:function(e){var t=[];return e.forEach((function(e){t.push(Object.entries(e).filter((function(e){return"name"===e[0]}))[0][1])})),t}}]),e}();function _(){var e=Object(r.useState)([]),t=Object(f.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(f.a)(a,2),o=s[0],d=s[1],p=Object(r.useState)(!1),b=Object(f.a)(p,2),h=b[0],O=b[1],m=Object(r.useState)("Just for fun"),v=Object(f.a)(m,2),k=v[0],x=v[1],g=Object(r.useState)([]),y=Object(f.a)(g,2),A=y[0],T=y[1];Object(r.useEffect)((function(){h||(C(),window.setTimeout((function(){d(""),L.reset(),O(!1)}),1e3*L.expiresIn))}));var C=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getAccessToken(B.spotifyClientId,B.spotifyClientSecret).catch((function(e){return console.warn(e)}));case 2:d(L.accessToken),O(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.searchTracks(t,o);case 2:n=e.sent,r=G.getFromResponseAsArrayOfITrack(n),c(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:Object(j.jsx)("span",{className:"highlight",children:"Spotify Fun"})}),Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(w,{onSearch:function(e){return N(e)}}),Object(j.jsxs)("div",{className:"App-playlist",children:[Object(j.jsx)(S,{searchResults:n,onAdd:function(e){!function(e){0===A.filter((function(t){return t.id===e.id})).length&&T([].concat(Object(i.a)(A),[e]))}(e)}}),Object(j.jsx)(R,{playlistName:k,playlistTracks:A,onNameChange:function(e){x(e)},onRemove:function(e){!function(e){T(A.filter((function(t){return t.id!==e.id})))}(e)},onSave:function(e){!function(e){e.map((function(e){return"spotify:track:".concat(e.id)}))}(e)}})]})]})]})}G.searchTracks=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){var c,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("https://api.spotify.com/v1/search?type=track&q=".concat(t),{headers:{Accept:"application/json",Authorization:"Bearer "+n,"Content-Type":"application/json"}});case 3:return c=e.sent,e.abrupt("return",c.data);case 7:if(e.prev=7,e.t0=e.catch(0),!(a=e.t0.response)){e.next=13;break}return s=a.data.error,e.abrupt("return",new Error("".concat(s.status,": ").concat(s.message)));case 13:return e.abrupt("return",new Error("Request Failed"));case 14:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),G.getFromResponseAsArrayOfITrack=function(e){var t=[];if(Object.keys(e).includes("tracks")){var n=Object.entries(e).filter((function(e){return"tracks"===e[0]}))[0][1];if(Object.keys(n).includes("items"))Object.entries(n).filter((function(e){return"items"===e[0]}))[0][1].forEach((function(e){var n=Object.entries(e).filter((function(e){return"id"===e[0]}))[0][1],r=Object.entries(e).filter((function(e){return"name"===e[0]}))[0][1],c=Object.entries(e).filter((function(e){return"artists"===e[0]}))[0][1],a=G.getArtists(c),s=Object.entries(e).filter((function(e){return"album"===e[0]}))[0][1],i={id:n,name:r,artists:a,album:Object.entries(s).filter((function(e){return"name"===e[0]}))[0][1]};t.push(i)}))}return t},n(129).config();var q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,171)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(_,{})}),document.getElementById("root")),q(console.log)},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},94:function(e,t,n){},99:function(e,t,n){}},[[133,1,2]]]);
//# sourceMappingURL=main.ae84559f.chunk.js.map